#!/usr/bin/env bash

set -euo pipefail

SCRIPTS_DIR=./wasm/build

CANISTER="sputnik"
ONLY_DEPS=
WITH_CERTIFICATION=1
BUILD_TYPE="extended"
TARGET="wasm32-wasip1"

SRC_ROOT_DIR="/juno/target/juno-main/src"

source "$SCRIPTS_DIR/build-canister"

export CARGO_TARGET_DIR="/juno/target/juno-main/target"

build_canister "$CANISTER" "$SRC_ROOT_DIR" "." "$ONLY_DEPS" "$WITH_CERTIFICATION" "$BUILD_TYPE" "$TARGET"