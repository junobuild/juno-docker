#!/usr/bin/env bash

set -euo pipefail

DIR=target

if [ ! -d "$DIR" ]; then
  mkdir "$DIR"
fi

# Use a specific commit (optional, or switch to refs/heads/main if needed)
COMMIT=c497ca6418568d004aa0a60d09138724a70e04d2

curl -L -o "$DIR/juno.tar.gz" https://github.com/junobuild/juno/archive/$COMMIT.tar.gz

tar -xf "$DIR/juno.tar.gz" -C "$DIR"

# Rename the extracted folder to juno-main
mv "$DIR/juno-$COMMIT" "$DIR/juno-main"

echo "juno source downloaded and extracted to $DIR/juno-main."
